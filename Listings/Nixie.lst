C51 COMPILER V9.54   NIXIE                                                                 10/02/2025 21:02:32 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE NIXIE
OBJECT MODULE PLACED IN .\Objects\Nixie.obj
COMPILER INVOKED BY: D:\keil_v5\C51\BIN\C51.EXE ..\..\src\Nixie.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\..\inc) DEBUG OBJEC
                    -TEXTEND PRINT(.\Listings\Nixie.lst) OBJECT(.\Objects\Nixie.obj)

line level    source

   1          #include <regx52.h>
   2          #include "Delay.h"
   3          
   4          /**
   5           * @brief 数码管显示函数
   6           * @param Location 数码管位置（1-8）
   7           * @param Number 要显示的数字（0-9）
   8           */
   9          void Nixie(unsigned char Location, Number){
  10   1          // 共阳极数码管段码表（0-9）
  11   1          // 段码顺序：dp g f e d c b a (P0.7-P0.0)
  12   1          unsigned char NixieTable[] = {
  13   1              0x3f, // 0: 00111111 → 显示0
  14   1              0x06, // 1: 00000110 → 显示1
  15   1              0x5b, // 2: 01011011 → 显示2
  16   1              0x4f, // 3: 01001111 → 显示3
  17   1              0x66, // 4: 01100110 → 显示4
  18   1              0x6d, // 5: 01101101 → 显示5
  19   1              0x7d, // 6: 01111101 → 显示6
  20   1              0x07, // 7: 00000111 → 显示7
  21   1              0x7f, // 8: 01111111 → 显示8
  22   1              0x6f  // 9: 01101111 → 显示9
  23   1          };
  24   1          
  25   1          // 根据位置选择数码管（通过74HC138译码器）
  26   1          switch(Location){
  27   2              case 1: // 位置1（最右边的数码管）
  28   2                  P2_4=1; P2_3=1; P2_2=1; // CBA=111 → Y7输出低电平 → 驱动LED8
  29   2                  break;
  30   2              case 2: // 位置2
  31   2                  P2_4=1; P2_3=1; P2_2=0; // CBA=110 → Y6输出低电平 → 驱动LED7
  32   2                  break;
  33   2              case 3: // 位置3
  34   2                  P2_4=1; P2_3=0; P2_2=1; // CBA=101 → Y5输出低电平 → 驱动LED6
  35   2                  break;
  36   2              case 4: // 位置4
  37   2                  P2_4=1; P2_3=0; P2_2=0; // CBA=100 → Y4输出低电平 → 驱动LED5
  38   2                  break;
  39   2              case 5: // 位置5
  40   2                  P2_4=0; P2_3=1; P2_2=1; // CBA=011 → Y3输出低电平 → 驱动LED4
  41   2                  break;
  42   2              case 6: // 位置6
  43   2                  P2_4=0; P2_3=1; P2_2=0; // CBA=010 → Y2输出低电平 → 驱动LED3
  44   2                  break;
  45   2              case 7: // 位置7
  46   2                  P2_4=0; P2_3=0; P2_2=1; // CBA=001 → Y1输出低电平 → 驱动LED2
  47   2                  break;
  48   2              case 8: // 位置8（最左边的数码管）
  49   2                  P2_4=0; P2_3=0; P2_2=0; // CBA=000 → Y0输出低电平 → 驱动LED1
  50   2                  break;
  51   2          }   
  52   1          
  53   1          // 设置段选信号（通过P0口输出段码）
  54   1          P0 = NixieTable[Number];
C51 COMPILER V9.54   NIXIE                                                                 10/02/2025 21:02:32 PAGE 2   

  55   1          
  56   1              
  57   1              // 静态显示数码管去掉下面两行代码
  58   1          // 短暂延时，维持显示
  59   1          Delay(1);  // 约1ms延时，如果不加延时，数码管被迅速点亮，又被迅速熄灭，导
             -亮度不够
  60   1          
  61   1          // 消隐处理：关闭所有段，防止切换到下一个数码管时产生鬼影
  62   1          P0 = 0x00;  // 所有段置高电平（共阳极数码管熄灭）
  63   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    136    ----
   CONSTANT SIZE    =     10    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      13
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
