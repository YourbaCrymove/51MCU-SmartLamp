C51 COMPILER V9.54   DELAY                                                                 10/23/2025 21:57:59 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE DELAY
OBJECT MODULE PLACED IN .\Objects\delay.obj
COMPILER INVOKED BY: D:\keil_v5\C51\BIN\C51.EXE ..\Common\delay.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\Common;..\Core;..\D
                    -river\keyInput;..\Driver\nixie;..\Driver\timer0;..\Driver\xpt2046) DEBUG OBJECTEXTEND PRINT(.\Listings\delay.lst) OBJECT
                    -(.\Objects\delay.obj)

line level    source

   1          #include "delay.h"
   2          #include <regx52.h>
   3          #include <intrins.h>
   4          
   5          /**
   6           * 微秒级延时函数
   7           * 说明：基于11.0592MHz晶振，每个机器周期约为1.085us
   8           * @param us 延时微秒数，最大约为65535us
   9           */
  10          void delayUs(unsigned int us)
  11          {
  12   1          unsigned int i;
  13   1          // 根据晶振频率计算循环次数，这里做了近似处理
  14   1          for(i = 0; i < us; i++)
  15   1          {
  16   2              // 大约1us的延时（根据实际情况微调）
  17   2              _nop_();_nop_();_nop_();_nop_();
  18   2              _nop_();_nop_();_nop_();_nop_();
  19   2              _nop_();_nop_();
  20   2          }
  21   1      }
  22          
  23          /**
  24           * 毫秒级延时函数
  25           * @param ms 延时毫秒数，最大约为65535ms
  26           */
  27          void delayMs(unsigned int ms)
  28          {
  29   1          unsigned int i, j;
  30   1          for(i = 0; i < ms; i++)
  31   1          {
  32   2              // 大约1ms的延时（11.0592MHz晶振）
  33   2              for(j = 0; j < 112; j++);
  34   2          }
  35   1      }
  36          
  37          /**
  38           * 秒级延时函数
  39           * @param s 延时秒数
  40           */
  41          void delayS(unsigned int s)
  42          {
  43   1          unsigned int i;
  44   1          // 1秒 = 1000毫秒，通过循环调用毫秒延时函数实现
  45   1          for(i = 0; i < s; i++)
  46   1          {
  47   2              delayMs(1000);  // 延时1000毫秒即1秒
  48   2          }
  49   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     89    ----
C51 COMPILER V9.54   DELAY                                                                 10/23/2025 21:57:59 PAGE 2   

   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
