C51 COMPILER V9.54   TIMER                                                                 10/24/2025 19:25:04 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE TIMER
OBJECT MODULE PLACED IN .\Objects\timer.obj
COMPILER INVOKED BY: D:\keil_v5\C51\BIN\C51.EXE ..\Driver\timer\timer.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\Common;..\Cor
                    -e;..\Driver\nixie;..\Driver\xpt2046;..\Driver\key;..\Driver\timer;..\Driver\lightControl) DEBUG OBJECTEXTEND PRINT(.\Lis
                    -tings\timer.lst) OBJECT(.\Objects\timer.obj)

line level    source

   1          /**
   2           * @file    timer.c
   3           * @brief   定时器驱动实现文件
   4           * @details 基于11.0592MHz晶振，配置定时器0每100us中断一次
   5           * @author  智能台灯项目组
   6           * @version 1.0
   7           * @date    2025-10-24
   8           */
   9          #include <regx52.h>
  10          #include "timer.h"
  11          
  12          /**
  13           * @brief 定时器0初始化函数
  14           * @details 配置为模式1(16位定时器)，基于11.0592MHz晶振
  15           * @note 定时器初值计算：65536 - 11059200/12/10000 = 65536-92
  16           */
  17          void timer0Init(void) {
  18   1              TMOD &= 0xF0;  // 清零T0的控制位，不影响T1的配置
  19   1              TMOD |= 0x01;   // 设置T0为模式1 (16位定时器)
  20   1              
  21   1              TH0 = (65536 - 92) / 256;
  22   1          TL0 = (65536 - 92) % 256;
  23   1              
  24   1              EA = 1;  // 开启总中断
  25   1              ET0 = 1; // 开启定时器0中断
  26   1              TR0 = 1; // 启动定时器0
  27   1      }
  28          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     19    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
